



RunLoop是通过内部维护的事件循环来对事件/消息进行管理的一个对象

没有消息需要处理时，休眠，以避免资源占用  用户态 -> 内核态



Runtime 

id = objc_object

1. isa_t
2. 关于isa操作相关
3. 弱引用相关
4. 关联对象相关
5. 内存管理相关

class = objc_class 继承自 objc_object







# 编译执行和解释执行

什么是脚本：脚本是嵌入式代码，无需编译器就可以在环境中运行，起到解释作用

动态程序一般有两种方式：

1、二进制方式是将我们编写的程序进行编译，编程机器可以识别的指令代码，然后再执行，这种已编译好的程序让我们只能执行，使用，却看不他的程序内容

2、脚本方式是一条条命令，在执行时，是由系统的解释器，将其一条条翻译成机器可识别的指令，例如shell脚本是由shell程序执行的，js是由浏览器解释执行的

下面解释一下解释执行和编译执行有什么区别：

1、编译执行是利用事先编写好的成为编写程序的机器语言程序，作为系统软件存放在计算机内，当高级语言源程序进入计算机，被这个翻译成目标程序，以完成源码要处理的运算并取得结果

2、解释方式是源程序进入计算机内，解释程序边扫描边解释，逐句输入逐句翻译，计算机一步一步执行，并不产生目标程序

机器码和字节码

1、机器码是CPU直接读取运行的机器指令，运行速度非常快，但是晦涩难懂，一般接触不到

2、字节码是一种中间状态的二进制代码，需要直译器转译后才可能成功的成为机器码











引用计数

alloc实现：

经过一系列调用，最终调用C函数的calloc。此时并没有设置应用计数为1





MRC __block修饰对象不会增加其引用计数，避免了循环引用

ARC __block 修饰对象会被强引用，无法避免循环引用，需手动解环





线程池所进行的工作的性质

- IO密集型
- CPU密集型

如果是CPU密集型的任务，我们应该设置数目较小的线程数，比如CPU数目加1。如果是IO密集型的任务，则应该设置可能多的线程数，由于IO操作不占用CPU，所以，不能让CPU闲下来。当然，如果线程数目太多，那么线程切换所带来的开销又会对系统的响应时间带来影响。





```
最佳线程数目 = （线程等待时间与线程CPU时间之比 + 1）* CPU数目
```

可以得出一个结论：
**线程等待时间所占比例越高，需要越多线程。线程CPU时间所占比例越高，需要越少线程**。













RSA

X.509证书是最经常使用的证书，它仅包含了公钥信息而没有私钥信息，是可以公开进行发布的，所以X.509证书对象一般都不需要加密。

X.509证书的格式通常如下:
……相关的可读解释信息（省略）……
---BEGIN CERTIFICATE---
……PEM编码的X.509证书内容(省略)……
---END CERTIFICATE---

PKCS#12证书

PKCS#12 证书不同于X.509证书，它可以包含一个或多个证书，并且还可以包含证书对应的私钥。PKCS#12的私钥是经过加密的，密钥由用户提供的口令产生。所以，无论在使用PKCS#12证书的时候一般会要用用户输入密钥口令。
PKCS#12证书文件在Windwos平台和Mozzila中支持的后缀名是p12或者pfx，



### 密钥编码

通常使用PEM和DER两种编码方式对要保存的密钥进行编码。

DER 编码存储的密钥文件是不可读的，如果用文本编辑器打开它，将看到一些难以理解的符号，因为这是一个二进制编码的文件。PEM则不一样，它要友好得多，因为PEM经过BASE64编码。用文本编辑器打开PEM编码的密钥文件，可以看到跟证书类似，它们真正的编码都包含在类似于：---BEGIN XXXXXX---和---END XXXXXX--- 这样的符号对内。





查看cer`openssl x509 -in CERT.cer -text`  直接文本显示

查看私钥 `cat private.pem`

pfx -> pem `openssl pkcs12 -in /Users/admin/Desktop/private.pfx -nodes -out server.pem`

Private.pem -> public.pem `openssl rsa -in /Users/admin/Downloads/key/private.pem  -pubout -out public.pem`

```

openssl pkcs12 -in /Users/admin/Desktop/private.pfx  -clcerts // END CERTIFICATE

openssl pkcs12 -in /Users/admin/Desktop/private.pfx  -nocerts -nodes // BEGIN PRIVATE KEY
```


但是，综合两个场景你会发现，第一个场景虽然被截获的消息没有泄露，但是可以利用截获的公钥，将假指令进行加密，然后传递给A。第二个场景虽然截获的消息不能被篡改，但是消息的内容可以利用公钥验签来获得，并不能防止泄露。所以在实际应用中，要根据情况使用，也可以同时使用加密和签名，比如A和B都有一套自己的公钥和私钥，当A要给B发送消息时，先用B的公钥对消息加密，再对加密的消息使用A的私钥加签名，达到既不泄露也不被篡改，更能保证消息的安全性。





三次握手，前一次的建立连接请求延迟到达后，服务器端建立连接，发送确认报文给客户端，同时进入等待接收客户端发送数据的状态。但是客户端认为这次连接没有成功，已经重新发送建立连接请求并建立了连接，就会忽略这个报文，导致服务器进入没有响应的等待状态





PPI （像素密度）

表示沿着对角线，每英寸所拥有的像素（pixel）数目，PPI的数值越高，代表显示屏能够以越高的密度显示图像，即通常所说的分辨率越高，颗粒感越弱，图像更清晰。

物理分辨率是硬件所支持的，逻辑分辨率是软件可以达到的